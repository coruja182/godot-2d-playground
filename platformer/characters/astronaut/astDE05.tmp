[gd_scene load_steps=36 format=3 uid="uid://3muyyryhuk31"]

[ext_resource type="Script" path="res://characters/astronaut/player.gd" id="1_q647e"]
[ext_resource type="Texture2D" uid="uid://2twxj6rl411g" path="res://assets/warped-files/PNG/spritesheets/player/player-idle.png" id="2_g4u3l"]
[ext_resource type="Texture2D" uid="uid://du43oqw20c6r1" path="res://assets/warped-files/PNG/spritesheets/player/player-run.png" id="3_svjr8"]
[ext_resource type="Texture2D" uid="uid://bdweis2vq752m" path="res://assets/warped-files/PNG/spritesheets/player/player-jump.png" id="4_8lmyw"]
[ext_resource type="PackedScene" uid="uid://djeq3p2dcpcnj" path="res://common/health_component/health_component.tscn" id="5_mcwxd"]
[ext_resource type="Script" path="res://common/move_component/move_component.gd" id="6_nxsl3"]
[ext_resource type="Script" path="res://characters/astronaut/state_machine.gd" id="7_pnyn6"]
[ext_resource type="Script" path="res://characters/astronaut/states/air.gd" id="8_adlq7"]
[ext_resource type="Script" path="res://characters/astronaut/states/run.gd" id="9_yrfbr"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_3iqkm"]
radius = 5.0
height = 40.0

[sub_resource type="Animation" id="Animation_68pdx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_g4u3l")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:hframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:vframes")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_nneld"]
resource_name = "double_Jump"
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_8lmyw")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [1, 2, 3, 4, 5]
}

[sub_resource type="Animation" id="Animation_xcrxy"]
resource_name = "fall"
length = 0.1
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_8lmyw")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [5]
}

[sub_resource type="Animation" id="Animation_k1c7n"]
resource_name = "idle"
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_g4u3l")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}

[sub_resource type="Animation" id="Animation_rey0g"]
resource_name = "jump"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_8lmyw")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_31gm6"]
resource_name = "run"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_svjr8")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:hframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [10]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:vframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Sprite2D:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hruc8"]
_data = {
"RESET": SubResource("Animation_68pdx"),
"double_Jump": SubResource("Animation_nneld"),
"fall": SubResource("Animation_xcrxy"),
"idle": SubResource("Animation_k1c7n"),
"jump": SubResource("Animation_rey0g"),
"run": SubResource("Animation_31gm6")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_h6jr0"]
animation = &"double_Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_wmec4"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nluhr"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g5xd2"]
animation = &"run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6hgta"]
animation = &"fall"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_vung5"]
blend_point_0/node = SubResource("AnimationNodeAnimation_nluhr")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_g5xd2")
blend_point_1/pos = 0.0
blend_point_2/node = SubResource("AnimationNodeAnimation_6hgta")
blend_point_2/pos = 1.0
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2145h"]
animation = &"run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e3uun"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0hlv0"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_c3tuy"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vp5fd"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_51p7r"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bama1"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_as6xo"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dbqb8"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uw33u"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_6ojif"]
states/DoubleJump/node = SubResource("AnimationNodeAnimation_h6jr0")
states/DoubleJump/position = Vector2(929, 98)
states/End/position = Vector2(1141, 97)
states/Idle/node = SubResource("AnimationNodeAnimation_wmec4")
states/Idle/position = Vector2(373, 98)
states/Move/node = SubResource("AnimationNodeBlendSpace1D_vung5")
states/Move/position = Vector2(625, 98)
states/Run/node = SubResource("AnimationNodeAnimation_2145h")
states/Run/position = Vector2(495, 197)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_e3uun"), "Idle", "Move", SubResource("AnimationNodeStateMachineTransition_0hlv0"), "Move", "Idle", SubResource("AnimationNodeStateMachineTransition_c3tuy"), "Move", "DoubleJump", SubResource("AnimationNodeStateMachineTransition_vp5fd"), "DoubleJump", "Move", SubResource("AnimationNodeStateMachineTransition_51p7r"), "Idle", "Run", SubResource("AnimationNodeStateMachineTransition_bama1"), "Run", "Idle", SubResource("AnimationNodeStateMachineTransition_as6xo"), "Run", "Move", SubResource("AnimationNodeStateMachineTransition_dbqb8"), "Move", "Run", SubResource("AnimationNodeStateMachineTransition_uw33u")]

[sub_resource type="GDScript" id="GDScript_4yfxr"]
script/source = "extends State


class_name PlayerIdleState


# Virtual function. Corresponds to the `_physics_process()` callback.
func physics_update(_delta: float) -> void:
	if not parent.is_on_floor():
		(state_machine as PlayerStateMachine).transition_to(\"Air\", { \"action\": \"on_fall\" })


# Virtual function. Receives events from the `_unhandled_input()` callback.
func handle_input(_event: InputEvent) -> void:
	if move_component.wants_jump():
		(state_machine as PlayerStateMachine).transition_to(\"Air\", { \"action\": \"on_jump\" })
	elif move_component.wants_to_move_sideways():
		(state_machine as PlayerStateMachine).transition_to(\"Run\")

# Virtual function. Called by the state machine upon changing the active state. The `msg` parameter
# is a dictionary with arbitrary data the state can use to initialize itself.
func enter(_msg := {}) -> void:
	print_debug(\"entered %s\" % name)
	(parent as Player).on_idle()
"

[node name="Astronaut" type="CharacterBody2D"]
position = Vector2(0, -26)
collision_layer = 2
script = ExtResource("1_q647e")
SPEED = 200.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 4)
shape = SubResource("CapsuleShape2D_3iqkm")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_hruc8")
}

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_g4u3l")
hframes = 4

[node name="AnimationTree" type="AnimationTree" parent="."]
callback_mode_process = 0
libraries = {
"": SubResource("AnimationLibrary_hruc8")
}
tree_root = SubResource("AnimationNodeStateMachine_6ojif")
anim_player = NodePath("../AnimationPlayer")
parameters/Move/blend_position = -0.000470161

[node name="HealthComponent" parent="." instance=ExtResource("5_mcwxd")]

[node name="MoveComponent" type="Node" parent="."]
script = ExtResource("6_nxsl3")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("7_pnyn6")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = SubResource("GDScript_4yfxr")

[node name="Air" type="Node" parent="StateMachine"]
script = ExtResource("8_adlq7")

[node name="Run" type="Node" parent="StateMachine"]
script = ExtResource("9_yrfbr")
